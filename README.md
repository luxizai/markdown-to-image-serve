# Markdown To Image Serve

[![license](https://img.shields.io/badge/license-MIT-blue.svg)](./LICENSE)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](#contributing)
[![Node Version](https://img.shields.io/node/v/next.svg)](https://nodejs.org)
[![Issues](https://img.shields.io/github/issues/wxingheng/markdown-to-image-serve.svg)](https://github.com/wxingheng/markdown-to-image-serve/issues)

<div align="center">

<h4>ğŸš€ åŸºäº Next.js å’Œ Puppeteer çš„ Markdown è½¬å›¾ç‰‡æœåŠ¡</h4>
<p>å°† Markdown å†…å®¹é«˜æ•ˆè½¬æ¢ä¸ºç²¾ç¾å›¾ç‰‡ï¼Œæä¾›å¼€ç®±å³ç”¨çš„ API æ¥å£ï¼Œæ”¯æŒ Docker å¿«é€Ÿéƒ¨ç½²ä¸äºŒæ¬¡å¼€å‘ã€‚</p>
ç®€ä½“ä¸­æ–‡ | [English](./README_EN.md)

</div>

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**Markdown To Image Serve** æ˜¯ä¸€æ¬¾å¼€ç®±å³ç”¨çš„ Markdown è½¬å›¾ç‰‡ API æœåŠ¡ï¼ŒåŸºäº Next.js 14 å’Œ Puppeteer æ„å»ºï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿
- ğŸš€ **ä¸€é”®éƒ¨ç½²** - æ”¯æŒ Docker Compose å¿«é€Ÿéƒ¨ç½²
- ğŸ”„ **RESTful API** - ç®€æ´æ˜“ç”¨çš„ API æ¥å£
- ğŸ¨ **å¤šä¸»é¢˜æ”¯æŒ** - å†…ç½® 9 ç§ç²¾ç¾ä¸»é¢˜
- ğŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸŒ **å¤šå¹³å°å…¼å®¹** - æ”¯æŒ Dockerã€Railwayã€Render ç­‰å¹³å°
- ğŸ”’ **å®‰å…¨é˜²æŠ¤** - æœ€æ–°å®‰å…¨è¡¥ä¸å’Œé˜²æŠ¤æœºåˆ¶
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - å›¾ç‰‡å‹ç¼©ã€ç¼“å­˜ä¼˜åŒ–

### ğŸ› ï¸ æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Next.js 14, React 18, TypeScript
- **UIç»„ä»¶**: Radix UI, Tailwind CSS
- **Markdown**: markdown-to-poster, react-md-editor
- **æµè§ˆå™¨**: Puppeteer Core, Chromium
- **éƒ¨ç½²**: Docker, Railway, Render, Fly.io

---

## ğŸ–¼ï¸ æ•ˆæœå±•ç¤º

<div align="center">
  <img src="https://github.com/user-attachments/assets/a0e641b8-9369-4cc6-b602-256f26089777" width="32%" alt="ç¤ºä¾‹1" />
  <img src="https://github.com/user-attachments/assets/d67f3b84-0a1a-4b60-853b-fcf13d313d0e" width="32%" alt="ç¤ºä¾‹2" />
  <img src="https://github.com/user-attachments/assets/e5e4ac59-a607-42d7-9d47-180eb7fe2268" width="32%" alt="ç¤ºä¾‹3" />
</div>

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“ å†…å®¹è½¬æ¢
- Markdown æ–‡æœ¬ä¸€é”®è½¬å›¾ç‰‡
- æ”¯æŒä»£ç é«˜äº®å’Œè¯­æ³•é«˜äº®
- è¡¨æ ¼æ¸²æŸ“å’Œæ•°å­¦å…¬å¼æ”¯æŒ
- å›¾ç‰‡å’Œé“¾æ¥å¤„ç†

### ğŸ¨ æ ·å¼å®šåˆ¶
- **9ç§å†…ç½®ä¸»é¢˜**: blue, pink, purple, green, yellow, gray, red, indigo, SpringGradientWave
- è‡ªå®šä¹‰é¡µçœ‰é¡µè„š
- Logo å’Œå“ç‰Œå…ƒç´ 
- å“åº”å¼å¸ƒå±€é€‚é…

### ğŸ”§ å¼€å‘å·¥å…·
- å®æ—¶é¢„è§ˆç¼–è¾‘å™¨
- ä¸»é¢˜åˆ‡æ¢å’Œå‚æ•°è°ƒæ•´
- ä¸€é”®å¤åˆ¶å›¾ç‰‡åŠŸèƒ½
- æ‰¹é‡å¤„ç†æ”¯æŒ

### ğŸ“¦ API æœåŠ¡
- RESTful API æ¥å£
- å›¾ç‰‡ç”Ÿæˆå’Œå­˜å‚¨
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- å¥åº·æ£€æŸ¥æœºåˆ¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸŒ åœ¨çº¿ä½“éªŒ

- [åœ¨çº¿æœåŠ¡ï¼ˆVercelï¼‰](https://markdown-to-image-serve.jcommon.top)
- [GitHub ä»“åº“](https://github.com/wxingheng/markdown-to-image-serve)

### ğŸ’» æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/wxingheng/markdown-to-image-serve.git
   cd markdown-to-image-serve
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   yarn install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**  
   æ–°å»º `.env` æ–‡ä»¶ï¼š
   ```env
   NEXT_PUBLIC_BASE_URL=http://localhost:3000
   CHROME_PATH=/path/to/your/chrome  # Chrome æµè§ˆå™¨è·¯å¾„
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   yarn dev
   ```

5. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

#### ğŸ”§ Chrome è·¯å¾„é…ç½®

**macOS**:
```bash
ls -l /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome
```

**Linux**:
```bash
which google-chrome
# æˆ–
which chromium
```

**Windows**:
```powershell
Get-Command chrome | Select-Object -ExpandProperty Definition
# æˆ–åœ¨ chrome://version/ æŸ¥çœ‹"å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„"
```

---

### ğŸ³ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ä½¿ç”¨ Docker Composeï¼ˆæœ€ç®€å•ï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/wxingheng/markdown-to-image-serve.git
cd markdown-to-image-serve

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è®¿é—®æœåŠ¡
open http://localhost:3000
```

#### ç›´æ¥ä½¿ç”¨ Docker

```bash
# æ‹‰å–é•œåƒ
docker pull wxingheng/markdown-to-image-serve:0.0.6

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 wxingheng/markdown-to-image-serve:0.0.6
```

#### è‡ªè¡Œæ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -f Dockerfile -t markdown-to-image-serve .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 markdown-to-image-serve
```

> **ğŸ’¡ æç¤º**: å¦‚æœ Docker æ„å»ºé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•ï¼š
> ```bash
> export DOCKER_BUILDKIT=0
> export COMPOSE_DOCKER_CLI_BUILD=0
> ```

#### ğŸ”§ Docker è®¾ç½®å¸®åŠ©

å¦‚æœé‡åˆ° Docker Hub æ¨é€æƒé™é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š[Docker è®¾ç½®æŒ‡å—](./DOCKER_SETUP.md)

---

### â˜ï¸ äº‘å¹³å°éƒ¨ç½²

ç”±äºé¡¹ç›®ä½¿ç”¨äº† Puppeteerï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹æ”¯æŒ Docker çš„å¹³å°ï¼š

#### ğŸ† Railway (æœ€æ¨è)
- **å…è´¹é¢åº¦**: æ¯æœˆ $5
- **ä¼˜åŠ¿**: åŸç”Ÿ Docker æ”¯æŒï¼Œç®€å•æ˜“ç”¨
- **éƒ¨ç½²**: è¿æ¥ GitHub ä»“åº“è‡ªåŠ¨éƒ¨ç½²

#### ğŸŒ Render
- **å…è´¹é¢åº¦**: å…è´¹ Web æœåŠ¡
- **ä¼˜åŠ¿**: ç®€å•é…ç½®ï¼Œè‡ªåŠ¨ HTTPS
- **é™åˆ¶**: å…è´¹ç‰ˆæœ‰ä¼‘çœ æœºåˆ¶

#### ğŸš€ Fly.io
- **å…è´¹é¢åº¦**: 3ä¸ªå…è´¹åº”ç”¨
- **ä¼˜åŠ¿**: å…¨çƒè¾¹ç¼˜éƒ¨ç½²ï¼Œæ€§èƒ½ä¼˜ç§€

#### â˜ï¸ Google Cloud Run
- **å…è´¹é¢åº¦**: æ¯æœˆ 200ä¸‡è¯·æ±‚
- **ä¼˜åŠ¿**: ä¼ä¸šçº§ç¨³å®šæ€§

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒï¼š[éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md)

---

## ğŸ“š API æ–‡æ¡£

### 1. ç”Ÿæˆæµ·æŠ¥å›¾ç‰‡

**æ¥å£**: `POST /api/generatePosterImage`

**è¯·æ±‚å‚æ•°**:

```json
{
  "markdown": "string",       // å¿…éœ€ï¼šMarkdown å†…å®¹
  "header": "string",         // å¯é€‰ï¼šé¡µçœ‰æ–‡æœ¬
  "footer": "string",         // å¯é€‰ï¼šé¡µè„šæ–‡æœ¬
  "logo": "string",           // å¯é€‰ï¼šlogoå›¾ç‰‡URL
  "theme": "string"           // å¯é€‰ï¼šä¸»é¢˜åç§°
}
```

**æ”¯æŒçš„ä¸»é¢˜**:
- `blue`, `pink`, `purple`, `green`, `yellow`, `gray`, `red`, `indigo`
- `SpringGradientWave` (é»˜è®¤)

**ç¤ºä¾‹è¯·æ±‚**:

```bash
curl -X POST 'http://localhost:3000/api/generatePosterImage' \
  -H 'Content-Type: application/json' \
  -d '{
    "markdown": "# Hello World\n\nThis is a test.\n\n## åŠŸèƒ½ç‰¹æ€§\n- æ”¯æŒ Markdown\n- å¤šä¸»é¢˜é€‰æ‹©\n- è‡ªå®šä¹‰æ ·å¼",
    "header": "æˆ‘çš„é¡¹ç›®",
    "footer": "Powered by Markdown To Image Serve",
    "theme": "SpringGradientWave"
  }'
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "url": "http://localhost:3000/api/images/poster-1234567890-abc123def.png"
}
```

### 2. è·å–å›¾ç‰‡

**æ¥å£**: `GET /api/images/[filename]`

**è¯´æ˜**: è·å–ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶

### 3. å¥åº·æ£€æŸ¥

**æ¥å£**: `GET /api/hello`

**è¯´æ˜**: æœåŠ¡å¥åº·çŠ¶æ€æ£€æŸ¥

---

## ğŸ› ï¸ å¼€å‘å·¥å…·

```bash
# ä»£ç æ£€æŸ¥
yarn lint

# è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜
yarn lint:fix

# ç±»å‹æ£€æŸ¥
yarn type-check

# æ„å»ºé¡¹ç›®
yarn build

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
yarn dev
```

---

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
markdown-to-image-serve/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ docs/           # æ–‡æ¡£é¡µé¢
â”‚   â”‚   â”œâ”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx        # é¦–é¡µ
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/            # UI ç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ Editor.tsx     # ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx     # å¤´éƒ¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ PosterView.tsx # æµ·æŠ¥é¢„è§ˆç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # Pages Router
â”‚   â”‚   â””â”€â”€ api/           # API è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ generatePosterImage.ts  # ç”Ÿæˆæµ·æŠ¥API
â”‚   â”‚       â””â”€â”€ images/    # å›¾ç‰‡æœåŠ¡API
â”‚   â””â”€â”€ lib/               # å·¥å…·å‡½æ•°
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile            # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ railway.json          # Railway é…ç½®
â”œâ”€â”€ fly.toml             # Fly.io é…ç½®
â”œâ”€â”€ render.yaml           # Render é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®é…ç½®
```

---

## ğŸ›  å¼€å‘è®¡åˆ’

### âœ… å·²å®Œæˆ
- [x] Docker éƒ¨ç½²æ”¯æŒ
- [x] è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½
- [x] å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
- [x] æ‰¹é‡ç”ŸæˆåŠŸèƒ½
- [x] ä¸­æ–‡å­—ä½“ä¼˜åŒ–
- [x] è‡ªå®šä¹‰æ¨¡æ¿ç³»ç»Ÿ
- [x] API è®¿é—®æ§åˆ¶
- [x] å®‰å…¨æ€§ä¼˜åŒ–
- [x] æ€§èƒ½ä¼˜åŒ–
- [x] äº‘å¹³å°éƒ¨ç½²æ”¯æŒ

### ğŸš§ è¿›è¡Œä¸­
- [ ] æ›´å¤šä¸»é¢˜æ”¯æŒ
- [ ] æ‰¹é‡å¤„ç†ä¼˜åŒ–
- [ ] ç¼“å­˜æœºåˆ¶å®Œå–„

### ğŸ“… è®¡åˆ’ä¸­
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] å›¾ç‰‡æ ¼å¼è½¬æ¢
- [ ] æ¨¡æ¿å¸‚åœº
- [ ] ç»Ÿè®¡åˆ†æ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Fork æœ¬ä»“åº“**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**: `git checkout -b feature/AmazingFeature`
3. **æäº¤æ”¹åŠ¨**: `git commit -m 'Add some AmazingFeature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/AmazingFeature`
5. **æäº¤ Pull Request**

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/wxingheng/markdown-to-image-serve.git
cd markdown-to-image-serve

# å®‰è£…ä¾èµ–
yarn install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
yarn dev
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint è§„åˆ™
- æäº¤å‰è¿è¡Œ `yarn lint` å’Œ `yarn type-check`

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ [markdown-to-image](https://github.com/gcui-art/markdown-to-image) é¡¹ç›®çš„å¯å‘
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒ

å¦‚æœæœ¬é¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ â­ï¸ **Star** æ”¯æŒï¼

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **GitHub**: [wxingheng/markdown-to-image-serve](https://github.com/wxingheng/markdown-to-image-serve)
- **åœ¨çº¿æœåŠ¡**: [markdown-to-image-serve.jcommon.top](https://markdown-to-image-serve.jcommon.top)
- **JCommonå·¥åœº**: [jcommon.top](https://jcommon.top)

